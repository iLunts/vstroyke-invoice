(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{KMbw:function(n,t,e){"use strict";e.r(t);var l=e("8Y7J");class r{}var s=e("Xg1U"),o=e("atuK"),i=e("pMnS"),u=e("SVse"),a=e("iInd"),c=e("lJxs");class b{constructor(n,t,e){this._db=n,this._customer=t,this._auth=e,this.customerList=[]}ngOnInit(){this.getCustomers()}getCustomers(){this._customer.getAll().snapshotChanges().pipe(Object(c.a)(n=>n.map(n=>Object.assign({_doc:n.payload.doc.id},n.payload.doc.data())))).subscribe(n=>{this.customerList=n})}deleteCustomer(n){this._customer.delete(n).catch(n=>{console.log("Error delete: ",n)})}}var d=e("PVcy"),g=e("Xr7G"),h=e("lGQG"),f=e("SxM1");let m=(()=>{class n{constructor(n,t,e,l){this._fs=n,this._auth=t,this._router=e,this.dbPath="/customers",this.customersRef=null,this.notifier=l,this.customersRef=n.collection(this.dbPath,n=>n.where("_userId","==",this._auth.getUserId()))}getAll(){return this.customersRef}add(n){this._fs.collection(this.dbPath,t=>t.where("_userId","==",this._auth.getUserId()).where("NM","==",n.NM)).valueChanges().subscribe(t=>{0===t.length?(this.customersRef.add(Object.assign({},n)),this._router.navigate(["/customer"])):this.notifier.notify("error","\u0414\u0430\u043d\u043d\u044b\u0439 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442 \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442")})}delete(n){return this.customersRef.doc(n).delete()}update(n,t){return this.customersRef.doc(n).update(t)}}return n.ngInjectableDef=l.Rb({factory:function(){return new n(l.Sb(g.a),l.Sb(h.a),l.Sb(a.k),l.Sb(f.f))},token:n,providedIn:"root"}),n})();var p=l.qb({encapsulation:0,styles:[[""]],data:{}});function C(n){return l.Nb(0,[(n()(),l.sb(0,0,null,null,4,"p",[],null,null,null,null,null)),(n()(),l.Lb(1,null,[" "," "])),l.Gb(0,u.f,[]),(n()(),l.sb(3,0,null,null,1,"button",[["class","btn"]],null,[[null,"click"]],(function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.deleteCustomer(n.context.$implicit._doc)&&l),l}),null,null)),(n()(),l.Lb(-1,null,["\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]))],null,(function(n,t){n(t,1,0,l.Mb(t,1,0,l.Eb(t,2).transform(t.context.$implicit)))}))}function _(n){return l.Nb(0,[(n()(),l.sb(0,0,null,null,3,"a",[["class","btn btn--primary"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(n,t,e){var r=!0;return"click"===t&&(r=!1!==l.Eb(n,1).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&r),r}),null,null)),l.rb(1,671744,null,0,a.n,[a.k,a.a,u.i],{routerLink:[0,"routerLink"]},null),l.Fb(2,2),(n()(),l.Lb(-1,null,["\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"])),(n()(),l.sb(4,0,null,null,0,"hr",[],null,null,null,null,null)),(n()(),l.hb(16777216,null,null,1,null,C)),l.rb(6,278528,null,0,u.k,[l.O,l.K,l.q],{ngForOf:[0,"ngForOf"]},null)],(function(n,t){var e=t.component,l=n(t,2,0,"/customer","create");n(t,1,0,l),n(t,6,0,e.customerList)}),(function(n,t){n(t,0,0,l.Eb(t,1).target,l.Eb(t,1).href)}))}var y=l.ob("data-customer-list",b,(function(n){return l.Nb(0,[(n()(),l.sb(0,0,null,null,1,"data-customer-list",[],null,null,null,_,p)),l.rb(1,114688,null,0,b,[d.a,m,h.a],null,null)],(function(n,t){n(t,1,0)}),null)}),{},{},[]),v=e("s7LF"),x=e("XsNI"),I=e("PPXL"),P=e("wd/R");class M{constructor(n,t,e,l,r,s,o,i,u,a,c,b,d,g,h,f,m,p,C){this._id=n,this._userId=t,this._createdDate=e||P.utc().toDate(),this.TP=l||null,this.NM=r||null,this.DC=s||null,this.DD=o||null,this.NU=i||null,this.VU=u||null,this.NS=a||null,this.VS=c||null,this.VNM=b||null,this.VSN=d||null,this.VFN=g||null,this.ACT=h||null,this.Z=f||null,this.VNMB=m||null,this.VSNB=p||null,this.VFNB=C||null}}class k{constructor(n,t,e,l,r){this._customer=n,this._auth=t,this._fb=e,this._egr=l,this._router=r,this.paymentOptions={showTax:!1,tax:20,showPaymentsTerm:!1,paymentsTerm:"",showEndDate:!1},this.form=this._fb.group({UNP:["",[v.s.required,v.s.minLength(9),v.s.maxLength(12)]],createDate:[P().format("DD.MM.YYYY"),[v.s.required]],billFrom:new v.g({}),billTo:new v.g({}),services:new v.g({})})}ngOnInit(){}get f(){return this.form.controls}changePaymentOptions(){}checkAddCustomer(){return this.form.invalid||!this.customerInfo}getCompanyInfo(){this.f.UNP.valid&&this._egr.getCompanyInfo(this.f.UNP.value).subscribe(n=>{n&&(this.customerInfo=new M,this.customerInfo._id=null,this.customerInfo._userId=this._auth.getUserId(),this.customerInfo._createdDate=P.utc().toDate(),this.customerInfo.TP=n.type,this.customerInfo.NM=n.id,this.customerInfo.DC=n.creationDate,this.customerInfo.DD=n.delitionDate,this.customerInfo.NU=n.issueDepartment.id,this.customerInfo.VU=n.issueDepartment.vu,this.customerInfo.NS=n.status.id,this.customerInfo.VS=n.status.vs,this.customerInfo.VNM=n.fullName,this.customerInfo.VSN=2===n.type?"\u0418\u041f "+n.fullName:n.shortName,this.customerInfo.VFN=n.firmName,this.customerInfo.ACT=n.active,this.customerInfo.Z=n.canSellShares,this.customerInfo.VNMB=null,this.customerInfo.VSNB=null,this.customerInfo.VFNB=null)})}addCustomer(){!this.form.invalid&&this.customerInfo&&this._customer.add(this.customerInfo)}}var O=e("IheW");let N=(()=>{class n{constructor(n){this._http=n}getCompanyInfo(n){if(n)return this._http.get("https://xn--b1agleslgi.xn--90ais/api/companies/Organization/".concat(n))}}return n.ngInjectableDef=l.Rb({factory:function(){return new n(l.Sb(O.c))},token:n,providedIn:"root"}),n})();var w=l.qb({encapsulation:0,styles:[[".creater[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;position:relative;margin:20px 0}.creater[_ngcontent-%COMP%]   .creater__editor[_ngcontent-%COMP%]{position:relative;width:100%;padding:30px;border-radius:5px;background-color:#fff;border:1px solid #eee}.creater[_ngcontent-%COMP%]   .creater__editor-header[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;-webkit-box-pack:justify;justify-content:space-between;padding-bottom:1.25rem;border-bottom:1px solid #f2f2f2}.creater[_ngcontent-%COMP%]   .creater__editor-company[_ngcontent-%COMP%]{padding-top:2rem;padding-bottom:2rem;border-bottom:1px solid #f2f2f2}.creater[_ngcontent-%COMP%]   .creater__editor-bill[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;-webkit-box-pack:justify;justify-content:space-between;padding-top:2rem;padding-bottom:2rem;border-bottom:1px solid #f2f2f2}.creater[_ngcontent-%COMP%]   .creater__editor-bill-block[_ngcontent-%COMP%]{width:50%;flex-shrink:0;margin-right:20px}.creater[_ngcontent-%COMP%]   .creater__editor-bill-block[_ngcontent-%COMP%] + .creater__editor-block[_ngcontent-%COMP%]{margin-left:20px;margin-right:0}.creater[_ngcontent-%COMP%]   .creater__editor-table[_ngcontent-%COMP%], .creater[_ngcontent-%COMP%]   .creater__editor-total[_ngcontent-%COMP%]{padding-top:2rem;padding-bottom:2rem;border-bottom:1px solid #f2f2f2}.creater[_ngcontent-%COMP%]   .creater__editor-footer[_ngcontent-%COMP%]{padding-top:2rem;font-size:.8rem;color:#637584;text-align:center}.creater[_ngcontent-%COMP%]   .creater__aside[_ngcontent-%COMP%]{display:block;width:250px;margin-left:15px;flex-shrink:0}.creater[_ngcontent-%COMP%]   .creater__aside-group[_ngcontent-%COMP%] + .creater__aside-group[_ngcontent-%COMP%]{padding-top:15px;margin-top:15px;border-top:1px solid #eee}.creater[_ngcontent-%COMP%]   .creater__btn[_ngcontent-%COMP%]{display:block;width:100%}fb-field[_ngcontent-%COMP%]{display:-webkit-inline-box;display:inline-flex}fb-field[_ngcontent-%COMP%] + fb-field[_ngcontent-%COMP%]{margin-left:15px}fb-toggle[_ngcontent-%COMP%]{display:-webkit-box;display:flex}fb-toggle[_ngcontent-%COMP%] + fb-toggle[_ngcontent-%COMP%]{margin-top:15px}"]],data:{}});function E(n){return l.Nb(0,[(n()(),l.sb(0,0,null,null,27,"section",[["class","creater"]],null,null,null,null,null)),(n()(),l.sb(1,0,null,null,21,"form",[["class","creater__editor"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(n,t,e){var r=!0,s=n.component;return"submit"===t&&(r=!1!==l.Eb(n,3).onSubmit(e)&&r),"reset"===t&&(r=!1!==l.Eb(n,3).onReset()&&r),"ngSubmit"===t&&(r=!1!==s.addCustomer()&&r),r}),null,null)),l.rb(2,16384,null,0,v.x,[],null,null),l.rb(3,540672,null,0,v.h,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),l.Ib(2048,null,v.c,null,[v.h]),l.rb(5,16384,null,0,v.n,[[4,v.c]],null,null),(n()(),l.sb(6,0,null,null,13,"div",[["class","creater__editor-header"]],null,null,null,null,null)),(n()(),l.sb(7,0,null,null,5,"fb-field",[["formControlName","UNP"],["label","\u0423\u041d\u041f \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],(function(n,t,e){var l=!0;return"ngModelChange"===t&&(l=!1!==n.component.getCompanyInfo()&&l),l}),x.b,x.a)),l.rb(8,114688,null,0,I.a,[],{label:[0,"label"],type:[1,"type"],control:[2,"control"]},null),l.Ib(1024,null,v.k,(function(n){return[n]}),[I.a]),l.rb(10,671744,null,0,v.f,[[3,v.c],[8,null],[8,null],[6,v.k],[2,v.v]],{name:[0,"name"]},{update:"ngModelChange"}),l.Ib(2048,null,v.l,null,[v.f]),l.rb(12,16384,null,0,v.m,[[4,v.l]],null,null),(n()(),l.sb(13,0,null,null,6,"div",[],null,null,null,null,null)),(n()(),l.sb(14,0,null,null,5,"fb-field",[["formControlName","createDate"],["label","\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,x.b,x.a)),l.rb(15,114688,null,0,I.a,[],{label:[0,"label"],type:[1,"type"],control:[2,"control"],readonly:[3,"readonly"]},null),l.Ib(1024,null,v.k,(function(n){return[n]}),[I.a]),l.rb(17,671744,null,0,v.f,[[3,v.c],[8,null],[8,null],[6,v.k],[2,v.v]],{name:[0,"name"]},null),l.Ib(2048,null,v.l,null,[v.f]),l.rb(19,16384,null,0,v.m,[[4,v.l]],null,null),(n()(),l.sb(20,0,null,null,2,"div",[["class","creater__editor-company"]],null,null,null,null,null)),(n()(),l.Lb(21,null,[" Company: "," "])),l.Gb(0,u.f,[]),(n()(),l.sb(23,0,null,null,4,"aside",[["class","creater__aside"]],null,null,null,null,null)),(n()(),l.sb(24,0,null,null,2,"div",[["class","creater__aside-group"]],null,null,null,null,null)),(n()(),l.sb(25,0,null,null,1,"button",[["class","btn btn--primary creater__btn creater__btn--primary"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.addCustomer()&&l),l}),null,null)),(n()(),l.Lb(-1,null,[" \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c "])),(n()(),l.sb(27,0,null,null,0,"div",[["class","creater__aside-group"]],null,null,null,null,null))],(function(n,t){var e=t.component;n(t,3,0,e.form),n(t,8,0,"\u0423\u041d\u041f \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430","text",e.f.UNP),n(t,10,0,"UNP"),n(t,15,0,"\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f","text",e.f.createDate,!0),n(t,17,0,"createDate")}),(function(n,t){var e=t.component;n(t,1,0,l.Eb(t,5).ngClassUntouched,l.Eb(t,5).ngClassTouched,l.Eb(t,5).ngClassPristine,l.Eb(t,5).ngClassDirty,l.Eb(t,5).ngClassValid,l.Eb(t,5).ngClassInvalid,l.Eb(t,5).ngClassPending),n(t,7,0,l.Eb(t,12).ngClassUntouched,l.Eb(t,12).ngClassTouched,l.Eb(t,12).ngClassPristine,l.Eb(t,12).ngClassDirty,l.Eb(t,12).ngClassValid,l.Eb(t,12).ngClassInvalid,l.Eb(t,12).ngClassPending),n(t,14,0,l.Eb(t,19).ngClassUntouched,l.Eb(t,19).ngClassTouched,l.Eb(t,19).ngClassPristine,l.Eb(t,19).ngClassDirty,l.Eb(t,19).ngClassValid,l.Eb(t,19).ngClassInvalid,l.Eb(t,19).ngClassPending),n(t,21,0,l.Mb(t,21,0,l.Eb(t,22).transform(e.customerInfo))),n(t,25,0,e.checkAddCustomer())}))}var S=l.ob("data-customer-create",k,(function(n){return l.Nb(0,[(n()(),l.sb(0,0,null,null,1,"data-customer-create",[],null,null,null,E,w)),l.rb(1,114688,null,0,k,[m,h.a,v.e,N,a.k],null,null)],(function(n,t){n(t,1,0)}),null)}),{},{},[]),D=e("yA/v"),V=e("1XSQ"),U=e("m7gy"),j=e("z5t0"),R=e("irV9"),L=e("rzCp"),z=e("978R"),T=e("2uy1"),F=e("z/SZ"),A=e("2ZVE"),B=e("ienR"),K=e("bOtU"),X=e("PCNd");class q{}e.d(t,"CustomerModuleNgFactory",(function(){return G}));var G=l.pb(r,[],(function(n){return l.Bb([l.Cb(512,l.j,l.ab,[[8,[s.a,o.a,o.c,o.b,o.d,i.a,y,S]],[3,l.j],l.v]),l.Cb(4608,u.n,u.m,[l.s,[2,u.z]]),l.Cb(4608,v.u,v.u,[]),l.Cb(4608,v.e,v.e,[]),l.Cb(4608,O.h,O.n,[u.d,l.z,O.l]),l.Cb(4608,O.o,O.o,[O.h,O.m]),l.Cb(5120,O.a,(function(n){return[n]}),[O.o]),l.Cb(4608,O.k,O.k,[]),l.Cb(6144,O.i,null,[O.k]),l.Cb(4608,O.g,O.g,[O.i]),l.Cb(6144,O.b,null,[O.g]),l.Cb(4608,O.f,O.j,[O.b,l.p]),l.Cb(4608,O.c,O.c,[O.f]),l.Cb(5120,D.b,D.e,[D.d,l.x,[2,D.c]]),l.Cb(4608,g.a,g.a,[D.d,[2,D.c],[2,g.b],[2,g.c],l.z,l.x,[2,g.d]]),l.Cb(4608,d.a,d.a,[D.d,[2,D.c],[2,V.a],l.z,l.x]),l.Cb(4608,R.a,R.a,[D.d,[2,D.c],l.z,l.x]),l.Cb(4608,f.k,f.k,[]),l.Cb(4608,f.i,f.i,[]),l.Cb(5120,f.a,f.g,[f.e]),l.Cb(4608,f.f,f.f,[f.i,f.a]),l.Cb(4608,z.a,z.a,[]),l.Cb(4608,T.a,T.a,[l.x,l.D,l.z]),l.Cb(4608,F.a,F.a,[l.j,l.x,l.p,T.a,l.g]),l.Cb(4608,A.f,A.f,[]),l.Cb(4608,B.r,B.r,[]),l.Cb(4608,B.t,B.t,[]),l.Cb(4608,B.a,B.a,[]),l.Cb(4608,B.f,B.f,[]),l.Cb(4608,B.c,B.c,[]),l.Cb(4608,B.h,B.h,[]),l.Cb(4608,B.j,B.j,[]),l.Cb(4608,B.s,B.s,[B.t,B.j]),l.Cb(5120,K.h,K.g,[K.a,K.e]),l.Cb(4608,K.b,K.b,[K.h]),l.Cb(1073742336,u.c,u.c,[]),l.Cb(1073742336,v.t,v.t,[]),l.Cb(1073742336,v.i,v.i,[]),l.Cb(1073742336,v.q,v.q,[]),l.Cb(1073742336,O.e,O.e,[]),l.Cb(1073742336,O.d,O.d,[]),l.Cb(1073742336,D.a,D.a,[l.z]),l.Cb(1073742336,U.a,U.a,[]),l.Cb(1073742336,j.a,j.a,[]),l.Cb(1073742336,L.a,L.a,[]),l.Cb(1073742336,z.d,z.d,[]),l.Cb(1073742336,A.d,A.d,[]),l.Cb(1073742336,B.e,B.e,[]),l.Cb(1073742336,K.f,K.f,[]),l.Cb(1073742336,f.c,f.c,[]),l.Cb(1073742336,X.a,X.a,[]),l.Cb(1073742336,a.o,a.o,[[2,a.t],[2,a.k]]),l.Cb(1073742336,q,q,[]),l.Cb(1073742336,r,r,[]),l.Cb(256,O.l,"XSRF-TOKEN",[]),l.Cb(256,O.m,"X-XSRF-TOKEN",[]),l.Cb(256,D.d,{apiKey:"AIzaSyAt0A-pNJNvSe9pUWrby_2-SFQCXI7WMsE",authDomain:"invoices-244bd.firebaseapp.com",databaseURL:"https://invoices-244bd.firebaseio.com",projectId:"invoices-244bd",storageBucket:"invoices-244bd.appspot.com",messagingSenderId:"281478247600",appId:"1:281478247600:web:4bce50f58c2357d55ab775",measurementId:"G-YDRP5ST41Z"},[]),l.Cb(256,D.c,void 0,[]),l.Cb(256,f.e,{position:{horizontal:{position:"middle",distance:12},vertical:{position:"top",distance:10,gap:10}},theme:"material",behaviour:{autoHide:3e4,onClick:"hide",onMouseover:"pauseAutoHide",showDismissButton:!0,stacking:4},animations:{enabled:!0,show:{preset:"slide",speed:300,easing:"ease"},hide:{preset:"fade",speed:300,easing:"ease",offset:50},shift:{speed:300,easing:"ease"},overlap:150}},[]),l.Cb(256,K.e,void 0,[]),l.Cb(256,K.a,K.i,[]),l.Cb(1024,a.i,(function(){return[[{path:"",children:[{path:"",component:b},{path:"create",component:k}]}]]}),[])])}))}}]);