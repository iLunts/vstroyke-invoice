(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{KMbw:function(l,n,t){"use strict";t.r(n);var e=t("8Y7J");class u{}var s=t("Xg1U"),r=t("atuK"),o=t("pMnS"),i=t("iInd"),a=t("SVse"),c=t("lJxs");class b{constructor(l,n,t){this._db=l,this._customer=n,this._auth=t,this.customerList=[]}ngOnInit(){this.getCustomers()}getCustomers(){this._customer.getAll().snapshotChanges().pipe(Object(c.a)(l=>l.map(l=>Object.assign({_doc:l.payload.doc.id},l.payload.doc.data())))).subscribe(l=>{this.customerList=l})}deleteCustomer(l){this._customer.delete(l).catch(l=>{console.log("Error delete: ",l)})}}var d=t("PVcy"),g=t("Xr7G"),h=t("lGQG"),m=t("SxM1");let f=(()=>{class l{constructor(l,n,t,e){this._fs=l,this._auth=n,this._router=t,this.dbPath="/customers",this.customersRef=null,this.notifier=e,this.customersRef=l.collection(this.dbPath,l=>l.where("_userId","==",this._auth.getUserId()))}getAll(){return this.customersRef}add(l){this._fs.collection(this.dbPath,n=>n.where("_userId","==",this._auth.getUserId()).where("NM","==",l.NM)).valueChanges().subscribe(n=>{0===n.length?(this.customersRef.add(Object.assign({},l)),this._router.navigate(["/customer"])):this.notifier.notify("error","\u0414\u0430\u043d\u043d\u044b\u0439 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442 \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442")})}delete(l){return this.customersRef.doc(l).delete()}update(l,n){return this.customersRef.doc(l).update(n)}}return l.ngInjectableDef=e.Rb({factory:function(){return new l(e.Sb(g.a),e.Sb(h.a),e.Sb(i.k),e.Sb(m.f))},token:l,providedIn:"root"}),l})();var p=e.qb({encapsulation:0,styles:[[""]],data:{}});function C(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,9,"tr",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),e.Lb(2,null,["",""])),(l()(),e.sb(3,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),e.Lb(4,null,["",""])),(l()(),e.sb(5,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),e.Lb(6,null,["",""])),(l()(),e.sb(7,0,null,null,2,"td",[["width","1"]],null,null,null,null,null)),(l()(),e.sb(8,0,null,null,1,"button",[["class","btn"]],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.deleteCustomer(l.context.$implicit._doc)&&e),e}),null,null)),(l()(),e.Lb(-1,null,["\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]))],null,(function(l,n){l(n,2,0,n.context.$implicit.NM),l(n,4,0,n.context.$implicit.VSN),l(n,6,0,n.context.$implicit._createdDate)}))}function _(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,3,"a",[["class","btn btn--primary"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,t){var u=!0;return"click"===n&&(u=!1!==e.Eb(l,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&u),u}),null,null)),e.rb(1,671744,null,0,i.n,[i.k,i.a,a.i],{routerLink:[0,"routerLink"]},null),e.Fb(2,2),(l()(),e.Lb(-1,null,["\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"])),(l()(),e.sb(4,0,null,null,13,"div",[["class","panel"]],null,null,null,null,null)),(l()(),e.sb(5,0,null,null,12,"table",[["class","table"]],null,null,null,null,null)),(l()(),e.sb(6,0,null,null,8,"thead",[],null,null,null,null,null)),(l()(),e.sb(7,0,null,null,7,"tr",[],null,null,null,null,null)),(l()(),e.sb(8,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),e.Lb(-1,null,["\u0423\u041d\u041f"])),(l()(),e.sb(10,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),e.Lb(-1,null,["\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"])),(l()(),e.sb(12,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),e.Lb(-1,null,["\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f"])),(l()(),e.sb(14,0,null,null,0,"th",[["width","1"]],null,null,null,null,null)),(l()(),e.sb(15,0,null,null,2,"tbody",[],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,C)),e.rb(17,278528,null,0,a.k,[e.O,e.K,e.q],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){var t=n.component,e=l(n,2,0,"/customer","create");l(n,1,0,e),l(n,17,0,t.customerList)}),(function(l,n){l(n,0,0,e.Eb(n,1).target,e.Eb(n,1).href)}))}var y=e.ob("data-customer-list",b,(function(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,1,"data-customer-list",[],null,null,null,_,p)),e.rb(1,114688,null,0,b,[d.a,f,h.a],null,null)],(function(l,n){l(n,1,0)}),null)}),{},{},[]),v=t("s7LF"),x=t("XsNI"),I=t("PPXL"),P=t("wd/R");class M{constructor(l,n,t,e,u,s,r,o,i,a,c,b,d,g,h,m,f,p,C){this._id=l,this._userId=n,this._createdDate=t||P.utc().toString(),this.TP=e||null,this.NM=u||null,this.DC=s||null,this.DD=r||null,this.NU=o||null,this.VU=i||null,this.NS=a||null,this.VS=c||null,this.VNM=b||null,this.VSN=d||null,this.VFN=g||null,this.ACT=h||null,this.Z=m||null,this.VNMB=f||null,this.VSNB=p||null,this.VFNB=C||null}}class k{constructor(l,n,t,e,u){this._customer=l,this._auth=n,this._fb=t,this._egr=e,this._router=u,this.paymentOptions={showTax:!1,tax:20,showPaymentsTerm:!1,paymentsTerm:"",showEndDate:!1},this.form=this._fb.group({UNP:["",[v.s.required,v.s.minLength(9),v.s.maxLength(12)]],createDate:[P().format("DD.MM.YYYY"),[v.s.required]],billFrom:new v.g({}),billTo:new v.g({}),services:new v.g({})})}ngOnInit(){}get f(){return this.form.controls}changePaymentOptions(){}checkAddCustomer(){return this.form.invalid||!this.customerInfo}getCompanyInfo(){this.f.UNP.valid&&this._egr.getCompanyInfo(this.f.UNP.value).subscribe(l=>{l&&(this.customerInfo=new M,this.customerInfo._id=null,this.customerInfo._userId=this._auth.getUserId(),this.customerInfo._createdDate=P.utc().format("DD.MM.YYYY"),this.customerInfo.TP=l.type,this.customerInfo.NM=l.id,this.customerInfo.DC=l.creationDate,this.customerInfo.DD=l.delitionDate,this.customerInfo.NU=l.issueDepartment.id,this.customerInfo.VU=l.issueDepartment.vu,this.customerInfo.NS=l.status.id,this.customerInfo.VS=l.status.vs,this.customerInfo.VNM=l.fullName,this.customerInfo.VSN=2===l.type?"\u0418\u041f "+l.fullName:l.shortName,this.customerInfo.VFN=l.firmName,this.customerInfo.ACT=l.active,this.customerInfo.Z=l.canSellShares,this.customerInfo.VNMB=null,this.customerInfo.VSNB=null,this.customerInfo.VFNB=null)})}addCustomer(){!this.form.invalid&&this.customerInfo&&this._customer.add(this.customerInfo)}}var O=t("IheW");let N=(()=>{class l{constructor(l){this._http=l}getCompanyInfo(l){if(l)return this._http.get("https://xn--b1agleslgi.xn--90ais/api/companies/Organization/".concat(l))}}return l.ngInjectableDef=e.Rb({factory:function(){return new l(e.Sb(O.c))},token:l,providedIn:"root"}),l})();var w=e.qb({encapsulation:0,styles:[[".creater[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;position:relative;margin:20px 0}.creater[_ngcontent-%COMP%]   .creater__editor[_ngcontent-%COMP%]{position:relative;width:100%;padding:30px;border-radius:5px;background-color:#fff;border:1px solid #eee}.creater[_ngcontent-%COMP%]   .creater__editor-header[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;-webkit-box-pack:justify;justify-content:space-between;padding-bottom:1.25rem;border-bottom:1px solid #f2f2f2}.creater[_ngcontent-%COMP%]   .creater__editor-company[_ngcontent-%COMP%]{padding-top:2rem;padding-bottom:2rem;border-bottom:1px solid #f2f2f2}.creater[_ngcontent-%COMP%]   .creater__editor-bill[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;-webkit-box-pack:justify;justify-content:space-between;padding-top:2rem;padding-bottom:2rem;border-bottom:1px solid #f2f2f2}.creater[_ngcontent-%COMP%]   .creater__editor-bill-block[_ngcontent-%COMP%]{width:50%;flex-shrink:0;margin-right:20px}.creater[_ngcontent-%COMP%]   .creater__editor-bill-block[_ngcontent-%COMP%] + .creater__editor-block[_ngcontent-%COMP%]{margin-left:20px;margin-right:0}.creater[_ngcontent-%COMP%]   .creater__editor-table[_ngcontent-%COMP%], .creater[_ngcontent-%COMP%]   .creater__editor-total[_ngcontent-%COMP%]{padding-top:2rem;padding-bottom:2rem;border-bottom:1px solid #f2f2f2}.creater[_ngcontent-%COMP%]   .creater__editor-footer[_ngcontent-%COMP%]{padding-top:2rem;font-size:.8rem;color:#637584;text-align:center}.creater[_ngcontent-%COMP%]   .creater__aside[_ngcontent-%COMP%]{display:block;width:250px;margin-left:15px;flex-shrink:0}.creater[_ngcontent-%COMP%]   .creater__aside-group[_ngcontent-%COMP%] + .creater__aside-group[_ngcontent-%COMP%]{padding-top:15px;margin-top:15px;border-top:1px solid #eee}.creater[_ngcontent-%COMP%]   .creater__btn[_ngcontent-%COMP%]{display:block;width:100%}fb-field[_ngcontent-%COMP%]{display:-webkit-inline-box;display:inline-flex}fb-field[_ngcontent-%COMP%] + fb-field[_ngcontent-%COMP%]{margin-left:15px}fb-toggle[_ngcontent-%COMP%]{display:-webkit-box;display:flex}fb-toggle[_ngcontent-%COMP%] + fb-toggle[_ngcontent-%COMP%]{margin-top:15px}"]],data:{}});function S(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,27,"section",[["class","creater"]],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,21,"form",[["class","creater__editor"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(l,n,t){var u=!0,s=l.component;return"submit"===n&&(u=!1!==e.Eb(l,3).onSubmit(t)&&u),"reset"===n&&(u=!1!==e.Eb(l,3).onReset()&&u),"ngSubmit"===n&&(u=!1!==s.addCustomer()&&u),u}),null,null)),e.rb(2,16384,null,0,v.x,[],null,null),e.rb(3,540672,null,0,v.h,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),e.Ib(2048,null,v.c,null,[v.h]),e.rb(5,16384,null,0,v.n,[[4,v.c]],null,null),(l()(),e.sb(6,0,null,null,13,"div",[["class","creater__editor-header"]],null,null,null,null,null)),(l()(),e.sb(7,0,null,null,5,"fb-field",[["formControlName","UNP"],["label","\u0423\u041d\u041f \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],(function(l,n,t){var e=!0;return"ngModelChange"===n&&(e=!1!==l.component.getCompanyInfo()&&e),e}),x.b,x.a)),e.rb(8,114688,null,0,I.a,[],{label:[0,"label"],type:[1,"type"],control:[2,"control"]},null),e.Ib(1024,null,v.k,(function(l){return[l]}),[I.a]),e.rb(10,671744,null,0,v.f,[[3,v.c],[8,null],[8,null],[6,v.k],[2,v.v]],{name:[0,"name"]},{update:"ngModelChange"}),e.Ib(2048,null,v.l,null,[v.f]),e.rb(12,16384,null,0,v.m,[[4,v.l]],null,null),(l()(),e.sb(13,0,null,null,6,"div",[],null,null,null,null,null)),(l()(),e.sb(14,0,null,null,5,"fb-field",[["formControlName","createDate"],["label","\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,x.b,x.a)),e.rb(15,114688,null,0,I.a,[],{label:[0,"label"],type:[1,"type"],control:[2,"control"],readonly:[3,"readonly"]},null),e.Ib(1024,null,v.k,(function(l){return[l]}),[I.a]),e.rb(17,671744,null,0,v.f,[[3,v.c],[8,null],[8,null],[6,v.k],[2,v.v]],{name:[0,"name"]},null),e.Ib(2048,null,v.l,null,[v.f]),e.rb(19,16384,null,0,v.m,[[4,v.l]],null,null),(l()(),e.sb(20,0,null,null,2,"div",[["class","creater__editor-company"]],null,null,null,null,null)),(l()(),e.Lb(21,null,[" Company: "," "])),e.Gb(0,a.f,[]),(l()(),e.sb(23,0,null,null,4,"aside",[["class","creater__aside"]],null,null,null,null,null)),(l()(),e.sb(24,0,null,null,2,"div",[["class","creater__aside-group"]],null,null,null,null,null)),(l()(),e.sb(25,0,null,null,1,"button",[["class","btn btn--primary creater__btn creater__btn--primary"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.addCustomer()&&e),e}),null,null)),(l()(),e.Lb(-1,null,[" \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c "])),(l()(),e.sb(27,0,null,null,0,"div",[["class","creater__aside-group"]],null,null,null,null,null))],(function(l,n){var t=n.component;l(n,3,0,t.form),l(n,8,0,"\u0423\u041d\u041f \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430","text",t.f.UNP),l(n,10,0,"UNP"),l(n,15,0,"\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f","text",t.f.createDate,!0),l(n,17,0,"createDate")}),(function(l,n){var t=n.component;l(n,1,0,e.Eb(n,5).ngClassUntouched,e.Eb(n,5).ngClassTouched,e.Eb(n,5).ngClassPristine,e.Eb(n,5).ngClassDirty,e.Eb(n,5).ngClassValid,e.Eb(n,5).ngClassInvalid,e.Eb(n,5).ngClassPending),l(n,7,0,e.Eb(n,12).ngClassUntouched,e.Eb(n,12).ngClassTouched,e.Eb(n,12).ngClassPristine,e.Eb(n,12).ngClassDirty,e.Eb(n,12).ngClassValid,e.Eb(n,12).ngClassInvalid,e.Eb(n,12).ngClassPending),l(n,14,0,e.Eb(n,19).ngClassUntouched,e.Eb(n,19).ngClassTouched,e.Eb(n,19).ngClassPristine,e.Eb(n,19).ngClassDirty,e.Eb(n,19).ngClassValid,e.Eb(n,19).ngClassInvalid,e.Eb(n,19).ngClassPending),l(n,21,0,e.Mb(n,21,0,e.Eb(n,22).transform(t.customerInfo))),l(n,25,0,t.checkAddCustomer())}))}var E=e.ob("data-customer-create",k,(function(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,1,"data-customer-create",[],null,null,null,S,w)),e.rb(1,114688,null,0,k,[f,h.a,v.e,N,i.k],null,null)],(function(l,n){l(n,1,0)}),null)}),{},{},[]),D=t("yA/v"),V=t("1XSQ"),L=t("m7gy"),U=t("z5t0"),j=t("irV9"),R=t("rzCp"),z=t("978R"),T=t("2uy1"),F=t("z/SZ"),A=t("2ZVE"),Y=t("ienR"),B=t("bOtU"),K=t("PCNd");class X{}t.d(n,"CustomerModuleNgFactory",(function(){return q}));var q=e.pb(u,[],(function(l){return e.Bb([e.Cb(512,e.j,e.ab,[[8,[s.a,r.a,r.c,r.b,r.d,o.a,y,E]],[3,e.j],e.v]),e.Cb(4608,a.n,a.m,[e.s,[2,a.z]]),e.Cb(4608,v.u,v.u,[]),e.Cb(4608,v.e,v.e,[]),e.Cb(4608,O.h,O.n,[a.d,e.z,O.l]),e.Cb(4608,O.o,O.o,[O.h,O.m]),e.Cb(5120,O.a,(function(l){return[l]}),[O.o]),e.Cb(4608,O.k,O.k,[]),e.Cb(6144,O.i,null,[O.k]),e.Cb(4608,O.g,O.g,[O.i]),e.Cb(6144,O.b,null,[O.g]),e.Cb(4608,O.f,O.j,[O.b,e.p]),e.Cb(4608,O.c,O.c,[O.f]),e.Cb(5120,D.b,D.e,[D.d,e.x,[2,D.c]]),e.Cb(4608,g.a,g.a,[D.d,[2,D.c],[2,g.b],[2,g.c],e.z,e.x,[2,g.d]]),e.Cb(4608,d.a,d.a,[D.d,[2,D.c],[2,V.a],e.z,e.x]),e.Cb(4608,j.a,j.a,[D.d,[2,D.c],e.z,e.x]),e.Cb(4608,m.k,m.k,[]),e.Cb(4608,m.i,m.i,[]),e.Cb(5120,m.a,m.g,[m.e]),e.Cb(4608,m.f,m.f,[m.i,m.a]),e.Cb(4608,z.a,z.a,[]),e.Cb(4608,T.a,T.a,[e.x,e.D,e.z]),e.Cb(4608,F.a,F.a,[e.j,e.x,e.p,T.a,e.g]),e.Cb(4608,A.f,A.f,[]),e.Cb(4608,Y.r,Y.r,[]),e.Cb(4608,Y.t,Y.t,[]),e.Cb(4608,Y.a,Y.a,[]),e.Cb(4608,Y.f,Y.f,[]),e.Cb(4608,Y.c,Y.c,[]),e.Cb(4608,Y.h,Y.h,[]),e.Cb(4608,Y.j,Y.j,[]),e.Cb(4608,Y.s,Y.s,[Y.t,Y.j]),e.Cb(5120,B.h,B.g,[B.a,B.e]),e.Cb(4608,B.b,B.b,[B.h]),e.Cb(1073742336,a.c,a.c,[]),e.Cb(1073742336,v.t,v.t,[]),e.Cb(1073742336,v.i,v.i,[]),e.Cb(1073742336,v.q,v.q,[]),e.Cb(1073742336,O.e,O.e,[]),e.Cb(1073742336,O.d,O.d,[]),e.Cb(1073742336,D.a,D.a,[e.z]),e.Cb(1073742336,L.a,L.a,[]),e.Cb(1073742336,U.a,U.a,[]),e.Cb(1073742336,R.a,R.a,[]),e.Cb(1073742336,z.d,z.d,[]),e.Cb(1073742336,A.d,A.d,[]),e.Cb(1073742336,Y.e,Y.e,[]),e.Cb(1073742336,B.f,B.f,[]),e.Cb(1073742336,m.c,m.c,[]),e.Cb(1073742336,K.a,K.a,[]),e.Cb(1073742336,i.o,i.o,[[2,i.t],[2,i.k]]),e.Cb(1073742336,X,X,[]),e.Cb(1073742336,u,u,[]),e.Cb(256,O.l,"XSRF-TOKEN",[]),e.Cb(256,O.m,"X-XSRF-TOKEN",[]),e.Cb(256,D.d,{apiKey:"AIzaSyAt0A-pNJNvSe9pUWrby_2-SFQCXI7WMsE",authDomain:"invoices-244bd.firebaseapp.com",databaseURL:"https://invoices-244bd.firebaseio.com",projectId:"invoices-244bd",storageBucket:"invoices-244bd.appspot.com",messagingSenderId:"281478247600",appId:"1:281478247600:web:4bce50f58c2357d55ab775",measurementId:"G-YDRP5ST41Z"},[]),e.Cb(256,D.c,void 0,[]),e.Cb(256,m.e,{position:{horizontal:{position:"middle",distance:12},vertical:{position:"top",distance:10,gap:10}},theme:"material",behaviour:{autoHide:3e4,onClick:"hide",onMouseover:"pauseAutoHide",showDismissButton:!0,stacking:4},animations:{enabled:!0,show:{preset:"slide",speed:300,easing:"ease"},hide:{preset:"fade",speed:300,easing:"ease",offset:50},shift:{speed:300,easing:"ease"},overlap:150}},[]),e.Cb(256,B.e,void 0,[]),e.Cb(256,B.a,B.i,[]),e.Cb(1024,i.i,(function(){return[[{path:"",children:[{path:"",component:b},{path:"create",component:k}]}]]}),[])])}))}}]);